{
  "meta": {
    "project": "EduTraker Backend API",
    "date": "2026-01-15",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "EduTraker is a SaaS platform designed to support educational institutions, especially in crisis-affected regions, by ensuring educational continuity, improving administrative efficiency, and enabling data-driven decision-making through a centralized backend API.",
  "core_goals": [
    "Mitigate the impact of crises on education by providing a reliable, centralized system for managing student and institutional data.",
    "Support multi-tenant architecture for workstreams and schools with strict Role-Based Access Control (RBAC) enforcing access and permissions.",
    "Provide secure authentication and authorization using JWT for various user roles including students, teachers, guardians, managers, and admins.",
    "Enable comprehensive user management with role assignments, activation, and deactivation capabilities.",
    "Facilitate data management around academic progress, communication, and reporting for educational administrators, teachers, and guardians."
  ],
  "key_features": [
    "Portal Registration and Login for guest and administrative roles with JWT-based authentication.",
    "Workstream Registration and Login specifically for students with access tied to specific workstreams.",
    "Role-Based Access Control enforced user management APIs to list, create, update, activate, and deactivate users.",
    "Support for multiple user roles including student, teacher, secretary, guardian, school manager, workstream manager, admin, and guest.",
    "Multi-tenancy with users isolated by organizational units (workstream or school) and permission scopes restricted accordingly.",
    "API endpoints documented using drf-spectacular for ease of integration and future frontend development."
  ],
  "user_flow_summary": [
    "Guest user registers on the portal, optionally providing name fields, and gets assigned a guest role with limited access.",
    "Admin or Manager Workstream logs in via the portal login endpoint receiving access and refresh JWT tokens.",
    "Students register and login through a workstream-specific API path, linking their account to the relevant workstream context.",
    "Authorized users with management roles access user management endpoints to create, modify, or deactivate users, constrained by RBAC and tenancy scopes.",
    "Users interact with academic, communication, and administrative features through role-appropriate access in future frontend integrations."
  ],
  "validation_criteria": [
    "All user registration endpoints validate required fields and confirm password fields where applicable, returning appropriate HTTP status codes (201 for success, 400 for validation errors).",
    "Authentication endpoints must return valid JWT access and refresh tokens with correct expiration configured (1 hour for access, 7 days for refresh).",
    "RBAC enforcement must be tested to ensure users can only perform actions allowed by their role and within their tenancy scope.",
    "User management endpoints return correct HTTP status codes including 204 No Content for successful updates, activation, and deactivation.",
    "Multi-tenancy isolation must prevent data leakage across different workstreams and schools ensuring users only see sibling or child organizational data as per their role."
  ],
  "code_summary": {
    "tech_stack": [
      "Python 3.x",
      "Django 5.x",
      "Django REST Framework",
      "SimpleJWT",
      "PostgreSQL/SQLite",
      "drf-spectacular"
    ],
    "auth_config": {
      "authentication_type": "JWT Bearer Token",
      "access_token_lifetime": "1 hour",
      "refresh_token_lifetime": "7 days",
      "header_format": "Authorization: Bearer <token>",
      "username_field": "email",
      "admin_credentials": {
        "email": "admin@test.com",
        "password": "test1234"
      }
    },
    "roles": [
      "student",
      "teacher",
      "secretary",
      "manager_school",
      "manager_workstream",
      "guardian",
      "admin",
      "guest"
    ],
    "features": [
      {
        "name": "Portal Registration",
        "description": "Register as Guest. Fields: email, password, [full_name, first_name, last_name, password_confirm].",
        "files": [
          "accounts/views/portal_views.py"
        ],
        "api_doc": {
          "path": "/api/portal/auth/register/",
          "method": "POST",
          "request_body": {
            "email": "string",
            "password": "string",
            "first_name": "string (optional)",
            "last_name": "string (optional)",
            "full_name": "string (optional)",
            "password_confirm": "string (optional)"
          },
          "responses": {
            "201": "User created as GUEST",
            "400": "Validation error"
          }
        }
      },
      {
        "name": "Portal Login",
        "description": "Login for Portal roles (Admin, Manager Workstream). Returns access/refresh at TOP LEVEL.",
        "files": [
          "accounts/views/portal_views.py"
        ],
        "api_doc": {
          "path": "/api/portal/auth/login/",
          "method": "POST",
          "responses": {
            "200": {
              "user": "object",
              "access": "string (JWT)",
              "refresh": "string (JWT)"
            },
            "403": "Unauthorized role"
          }
        }
      },
      {
        "name": "Workstream Registration",
        "description": "Register as Student in workstream. Fields: email, password, [full_name, first_name, last_name, password_confirm].",
        "files": [
          "accounts/views/workstream_portal_views.py"
        ],
        "api_doc": {
          "path": "/api/workstream/{workstream_id}/auth/register/",
          "method": "POST",
          "responses": {
            "201": "User created as STUDENT",
            "404": "Workstream not found"
          }
        }
      },
      {
        "name": "Workstream Login",
        "description": "Login for Workstream users. Returns access/refresh at TOP LEVEL.",
        "files": [
          "accounts/views/workstream_portal_views.py"
        ],
        "api_doc": {
          "path": "/api/workstream/{workstream_id}/auth/login/",
          "method": "POST",
          "responses": {
            "200": {
              "user": "object",
              "access": "string (JWT)",
              "refresh": "string (JWT)"
            }
          }
        }
      },
      {
        "name": "User Management",
        "description": "RBAC-enforced user management.",
        "files": [
          "accounts/views/user_views.py"
        ],
        "api_doc": {
          "endpoints": [
            {
              "path": "/api/users/",
              "method": "GET",
              "desc": "List users (RBAC filters applied)"
            },
            {
              "path": "/api/users/create/",
              "method": "POST",
              "desc": "Create user (supports first/last name)"
            },
            {
              "path": "/api/users/{id}/",
              "method": "GET",
              "desc": "Get detail (404 returns 'User not found.')"
            },
            {
              "path": "/api/users/{id}/",
              "method": "PATCH",
              "desc": "Update (Returns 204 No Content)"
            },
            {
              "path": "/api/users/{id}/deactivate/",
              "method": "POST",
              "desc": "Deactivate (Returns 204 No Content, NO body)"
            },
            {
              "path": "/api/users/{id}/activate/",
              "method": "POST",
              "desc": "Activate (Returns 204 No Content, NO body)"
            }
          ]
        }
      }
    ],
    "multi_tenancy": {
      "isolation": "Users are assigned to work_stream or school. Access is restricted to sibling or child records based on role."
    }
  }
}
